<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™”íˆ¬íŒ¨ ì‚¬ì²œì„±</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, rgba(26, 95, 63, 0.3), rgba(45, 74, 54, 0.3)), url('images/pattern.png');
            background-size: auto, 110px 110px;
            background-repeat: no-repeat, repeat;
            background-attachment: fixed, fixed;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }

        function createExplosionEffect(cardElement) {
            const rect = cardElement.getBoundingClientRect();
            const gameBoard = document.getElementById('gameBoard');
            const boardRect = gameBoard.getBoundingClientRect();
            
            // ì¹´ë“œ ì¤‘ì‹¬ì  ê³„ì‚° (ê²Œì„ë³´ë“œ ê¸°ì¤€)
            const centerX = rect.left + rect.width / 2 - boardRect.left;
            const centerY = rect.top + rect.height / 2 - boardRect.top;
            
            // í­ë°œ ì»¨í…Œì´ë„ˆ ìƒì„±
            const explosion = document.createElement('div');
            explosion.className = 'explosion-effect';
            explosion.style.left = centerX + 'px';
            explosion.style.top = centerY + 'px';
            
            // ë³„ ì´í™íŠ¸ ì¶”ê°€
            for (let i = 0; i < 6; i++) {
                const star = document.createElement('div');
                star.className = 'explosion-star';
                star.textContent = 'âœ¨';
                const angle = (i * 60) * Math.PI / 180;
                const distance = 30;
                star.style.left = (Math.cos(angle) * distance - 10) + 'px';
                star.style.top = (Math.sin(angle) * distance - 10) + 'px';
                star.style.animationDelay = (i * 0.1) + 's';
                explosion.appendChild(star);
            }
            
            // íŒŒí‹°í´ ì´í™íŠ¸ ì¶”ê°€
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'explosion-particle';
                particle.style.backgroundColor = colors[i % colors.length];
                
                const angle = (i * 30) * Math.PI / 180;
                const distance = 40 + Math.random() * 20;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;
                
                particle.style.setProperty('--dx', dx + 'px');
                particle.style.setProperty('--dy', dy + 'px');
                particle.style.animationDelay = (Math.random() * 0.2) + 's';
                
                explosion.appendChild(particle);
            }
            
            gameBoard.appendChild(explosion);
            
            // 0.8ì´ˆ í›„ ì´í™íŠ¸ ì œê±°
            setTimeout(() => {
                if (explosion.parentNode) {
                    explosion.remove();
                }
            }, 800);
        }

        function playMatchSound() {
            // Web Audio APIë¥¼ ì‚¬ìš©í•œ "í‘!" ì†Œë¦¬ ìƒì„±
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // ë†’ì€ ì£¼íŒŒìˆ˜ì˜ ì§§ì€ ì†Œë¦¬ ìƒì„±
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // "í‘!" ì†Œë¦¬ë¥¼ ìœ„í•œ ì£¼íŒŒìˆ˜ ì„¤ì •
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.2);
                
                // ë³¼ë¥¨ ì„¤ì • (ë¹ ë¥´ê²Œ ê°ì†Œ)
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                // ì†Œë¦¬ ì¬ìƒ
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
                
            } catch (error) {
                // ì˜¤ë””ì˜¤ ì§€ì›ì´ ì•ˆ ë˜ëŠ” ê²½ìš° ë¬´ì‹œ
                console.log('Audio not supported');
            }
        }

        .header {
            display: grid;
            grid-template-columns: 200px 1fr 200px;
            gap: 20px;
            width: 1100px;
            margin-bottom: 20px;
        }

        .left-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
            margin-left: 30px;
            margin-bottom: 20px;
        }

        .title-image {
            width: 454px;
            height: 167px;
            background: #ff0000;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin: 0 auto;
        }

        .right-info {
            width: 200px;
            text-align: center;
            margin-top: 50px;
            margin-left: -60px; /* ì•ˆìª½ìœ¼ë¡œ ì´ë™ */
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px #388E3C;
            min-width: 120px;
            white-space: nowrap;
            transition: all 0.2s ease;
        }

        .btn:hover { 
            background: #2196F3; 
            box-shadow: 0 4px #1976D2; 
            transform: translateY(-2px); 
        }
        .btn:disabled { background: #666; cursor: not-allowed; }

        .game-board {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 4px;
            width: 1100px;
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .card {
            width: 84px;
            height: 120px;
            background: #f5f5dc;
            border: 2px solid #8b4513;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            color: #2c1810;
            background-size: cover;
            background-position: center;
        }

        .card.has-image {
            background: none;
            border: 2px solid #8b4513;
        }

        .explosion-effect {
            position: absolute;
            pointer-events: none;
            z-index: 1000;
        }

        .explosion-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: explode 0.8s ease-out forwards;
        }

        .explosion-star {
            position: absolute;
            color: #ffd700;
            font-size: 20px;
            animation: starBurst 0.8s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(0) translate(0, 0);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(1) translate(var(--dx), var(--dy));
                opacity: 0;
            }
        }

        @keyframes starBurst {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: scale(0.5) rotate(360deg);
                opacity: 0;
            }
        }

        .card.has-image .card-content {
            display: none;
        }

        .card:hover { transform: scale(1.05); }
        .card.selected { background: #ffeb3b; border-color: #ffc107; transform: scale(1.1); }
        .card.hint { background: #ff9800; animation: hintPulse 1s infinite; }
        .card.empty { background: transparent; border: none; cursor: default; }
        .card.empty:hover { transform: none; }

        @keyframes hintPulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

        .status {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 15px;
            min-height: 30px;
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
        }

        .rules {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            z-index: 2000;
            border: 2px solid #ffd700;
        }

        .rules-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1999;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="left-controls">
            <button class="btn" onclick="toggleRules()">ê²Œì„ë°©ë²•</button>
            <button class="btn" onclick="startNewGame()">ìƒˆê²Œì„</button>
            <button class="btn" onclick="getHint()" id="hintBtn">íŒíŠ¸ (3ë²ˆ)</button>
            <button class="btn" onclick="shuffleCards()" id="shuffleBtn">ì„ê¸° (2ë²ˆ)</button>
        </div>
        
        <div class="title-image" id="gameTitle">í™”íˆ¬íŒ¨ ì‚¬ì²œì„±</div>
        
        <div class="right-info">
            <div style="font-size: 1.4em; margin-bottom: 2px;">ì‹œê°„: <span id="timer">00:00</span></div>
            <div style="font-size: 1.8em; color: #ffd700; font-weight: bold;">ì ìˆ˜: <span id="score">0</span>ì </div>
        </div>
    </div>

    <div class="status" id="status">ê°™ì€ ì›”ê³¼, ê°™ì€ ìºë¦­í„° ì„¸íŠ¸ë¥¼ í•œìŒì”© ì°¾ìœ¼ì„¸ìš”!</div>
    <div id="gameBoard" class="game-board"></div>

    <div id="gameOver" class="game-over" style="display: none;">
        <h2 style="color: #ffd700;">ğŸ‰ ê²Œì„ ì™„ë£Œ!</h2>
        <p>ìµœì¢… ì‹œê°„: <span id="finalTime"></span></p>
        <p>ìµœì¢… ì ìˆ˜: <span id="finalScore"></span></p>
        <button class="btn" onclick="startNewGame()" style="margin-top: 25px; padding: 15px 30px; font-size: 1.2em;">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>

    <div id="rulesOverlay" class="rules-overlay" style="display: none;" onclick="toggleRules()"></div>
    <div id="rules" class="rules" style="display: none;">
        <h3 style="color: #ffd700;">ğŸ® ê²Œì„ ë°©ë²•</h3>
        <p>â€¢ ê°™ì€ ì„¸íŠ¸ì˜ í™”íˆ¬íŒ¨ ë‘ ì¥ì„ ì„ íƒí•˜ì—¬ ì œê±°í•©ë‹ˆë‹¤ (ì˜ˆ: 1ì›” ê´‘ê³¼ 1ì›” í”¼)</p>
        <p>â€¢ ì¼ë¶€ëŠ” í™”íˆ¬íŒ¨ê°€ ì•„ë‹ˆë¼ ìºë¦­í„° ì„¸íŠ¸ë¥¼ ì°¾ì•„ì•¼í•©ë‹ˆë‹¤. </p>
        <p>â€¢ ë‘ íŒ¨ ì‚¬ì´ì˜ ì—°ê²°ì„ ì´ 2ë²ˆ ì´í•˜ë¡œ êº¾ì—¬ì•¼ ì œê±° ê°€ëŠ¥í•©ë‹ˆë‹¤</p>
        <p>â€¢ ì—°ê²°ì„ ì€ ë‹¤ë¥¸ íŒ¨ë¥¼ ì§€ë‚˜ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>
        <p>â€¢ ëª¨ë“  62ì¥ì˜ íŒ¨ë¥¼ ì œê±°í•˜ë©´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤</p>
        <br>
        
        <h3>ğŸ¯ ì ìˆ˜ ì‹œìŠ¤í…œ</h3>
        <p>â€¢ ê¸°ë³¸ ì ìˆ˜: ë§¤ì¹˜ë‹¹ 100ì </p>
        <p>â€¢ ì—°ì† ë§¤ì¹˜ ë³´ë„ˆìŠ¤: ìµœëŒ€ 500ì </p>
        <p>â€¢ íŒíŠ¸ ì‚¬ìš©: -50ì </p>
        <p>â€¢ ì„ê¸° ì‚¬ìš©: -100ì </p>
        <br>
        
        <h3>ğŸ”§ ë„êµ¬</h3>
        <p>â€¢ íŒíŠ¸: 3íšŒ ì‚¬ìš© ê°€ëŠ¥ (ë§¤ì¹˜ ê°€ëŠ¥í•œ íŒ¨ í‘œì‹œ)</p>
        <p>â€¢ ì„ê¸°: 2íšŒ ì‚¬ìš© ê°€ëŠ¥ (íŒ¨ ìœ„ì¹˜ ì¬ë°°ì¹˜)</p>
        <br>
        <button class="btn" onclick="toggleRules()">ë‹«ê¸°</button>
    </div>

    <script>
        const cards = [
            // 1ì›” ì†¡í•™
            { id: 1, month: 1, symbol: 'ğŸ•Šï¸', type: 'ê´‘', name: 'ì†¡í•™', fullName: '1ì›” ì†¡í•™ê´‘', image: 'images/01_gwang.png' },
            { id: 1, month: 1, symbol: 'ğŸŒ²', type: 'ê³ ', name: 'ì†¡í•™', fullName: '1ì›” ì†¡í•™ê³ ', image: 'images/01_go.png' },
            { id: 1, month: 1, symbol: 'ğŸ‹', type: 'ì´ˆ', name: 'ì†¡í•™', fullName: '1ì›” ì†¡í•™ì´ˆ', image: 'images/01_cho.png' },
            { id: 1, month: 1, symbol: 'ğŸƒ', type: 'í”¼', name: 'ì†¡í•™', fullName: '1ì›” ì†¡í•™í”¼', image: 'images/01_pi.png' },
            
            // 2ì›” ë§¤í™”
            { id: 2, month: 2, symbol: 'ğŸŒº', type: 'ê³ ', name: 'ë§¤í™”', fullName: '2ì›” ë§¤í™”ê³ ', image: 'images/02_go1.png' },
            { id: 2, month: 2, symbol: 'ğŸ¦…', type: 'ê³ ', name: 'ë§¤í™”', fullName: '2ì›” ë§¤í™”ìƒˆ', image: 'images/02_go2.png' },
            { id: 2, month: 2, symbol: 'ğŸŒ¸', type: 'ì´ˆ', name: 'ë§¤í™”', fullName: '2ì›” ë§¤í™”ì´ˆ', image: 'images/02_cho.png' },
            { id: 2, month: 2, symbol: 'ğŸƒ', type: 'í”¼', name: 'ë§¤í™”', fullName: '2ì›” ë§¤í™”í”¼', image: 'images/02_pi.png' },
            
            // 3ì›” ë²šê½ƒ
            { id: 3, month: 3, symbol: 'ğŸŒ¸', type: 'ê´‘', name: 'ë²šê½ƒ', fullName: '3ì›” ë²šê½ƒê´‘', image: 'images/03_gwang.png' },
            { id: 3, month: 3, symbol: 'ğŸ‹', type: 'ê³ ', name: 'ë²šê½ƒ', fullName: '3ì›” ë²šê½ƒê³ ', image: 'images/03_go.png' },
            { id: 3, month: 3, symbol: 'ğŸŒº', type: 'ì´ˆ', name: 'ë²šê½ƒ', fullName: '3ì›” ë²šê½ƒì´ˆ', image: 'images/03_cho.png' },
            { id: 3, month: 3, symbol: 'ğŸƒ', type: 'í”¼', name: 'ë²šê½ƒ', fullName: '3ì›” ë²šê½ƒí”¼', image: 'images/03_pi.png' },
            
            // 4ì›” í‘ì‹¸ë¦¬
            { id: 4, month: 4, symbol: 'ğŸ¦…', type: 'ê³ ', name: 'í‘ì‹¸ë¦¬', fullName: '4ì›” ë‘ê²¬ìƒˆ', image: 'images/04_go1.png' },
            { id: 4, month: 4, symbol: 'ğŸ‹', type: 'ê³ ', name: 'í‘ì‹¸ë¦¬', fullName: '4ì›” í‘ì‹¸ë¦¬ê³ ', image: 'images/04_go2.png' },
            { id: 4, month: 4, symbol: 'ğŸŒ¿', type: 'ì´ˆ', name: 'í‘ì‹¸ë¦¬', fullName: '4ì›” í‘ì‹¸ë¦¬ì´ˆ', image: 'images/04_cho.png' },
            { id: 4, month: 4, symbol: 'ğŸƒ', type: 'í”¼', name: 'í‘ì‹¸ë¦¬', fullName: '4ì›” í‘ì‹¸ë¦¬í”¼', image: 'images/04_pi.png' },
            
            // 5ì›” ì°½í¬
            { id: 5, month: 5, symbol: 'ğŸ‹', type: 'ê³ ', name: 'ì°½í¬', fullName: '5ì›” ì°½í¬ê³ ', image: 'images/05_go1.png' },
            { id: 5, month: 5, symbol: 'ğŸŒ‰', type: 'ê³ ', name: 'ì°½í¬', fullName: '5ì›” ë‹¤ë¦¬', image: 'images/05_go2.png' },
            { id: 5, month: 5, symbol: 'ğŸŒ¾', type: 'ì´ˆ', name: 'ì°½í¬', fullName: '5ì›” ì°½í¬ì´ˆ', image: 'images/05_cho.png' },
            { id: 5, month: 5, symbol: 'ğŸƒ', type: 'í”¼', name: 'ì°½í¬', fullName: '5ì›” ì°½í¬í”¼', image: 'images/05_pi.png' },
            
            // 6ì›” ëª¨ë€
            { id: 6, month: 6, symbol: 'ğŸ¦‹', type: 'ê³ ', name: 'ëª¨ë€', fullName: '6ì›” ë‚˜ë¹„', image: 'images/06_go1.png' },
            { id: 6, month: 6, symbol: 'ğŸŒº', type: 'ê³ ', name: 'ëª¨ë€', fullName: '6ì›” ëª¨ë€ê³ ', image: 'images/06_go2.png' },
            { id: 6, month: 6, symbol: 'ğŸŒ¸', type: 'ì´ˆ', name: 'ëª¨ë€', fullName: '6ì›” ëª¨ë€ì´ˆ', image: 'images/06_cho.png' },
            { id: 6, month: 6, symbol: 'ğŸƒ', type: 'í”¼', name: 'ëª¨ë€', fullName: '6ì›” ëª¨ë€í”¼', image: 'images/06_pi.png' },
            
            // 7ì›” í™ë‹¨
            { id: 7, month: 7, symbol: 'ğŸ—', type: 'ê³ ', name: 'í™ë‹¨', fullName: '7ì›” ë©§ë¼ì§€', image: 'images/07_go.png' },
            { id: 7, month: 7, symbol: 'ğŸ€', type: 'ì´ˆ', name: 'í™ë‹¨', fullName: '7ì›” í™ë‹¨', image: 'images/07_cho1.png' },
            { id: 7, month: 7, symbol: 'ğŸŒ¿', type: 'ì´ˆ', name: 'í™ë‹¨', fullName: '7ì›” ì‹¸ë¦¬ì´ˆ', image: 'images/07_cho2.png' },
            { id: 7, month: 7, symbol: 'ğŸƒ', type: 'í”¼', name: 'í™ë‹¨', fullName: '7ì›” ì‹¸ë¦¬í”¼', image: 'images/07_pi.png' },
            
            // 8ì›” ê³µì‚°
            { id: 8, month: 8, symbol: 'ğŸŒ•', type: 'ê´‘', name: 'ê³µì‚°', fullName: '8ì›” ë‹¬ê´‘', image: 'images/08_gwang.png' },
            { id: 8, month: 8, symbol: 'ğŸ¦†', type: 'ê³ ', name: 'ê³µì‚°', fullName: '8ì›” ê¸°ëŸ¬ê¸°', image: 'images/08_go.png' },
            { id: 8, month: 8, symbol: 'ğŸŒ¾', type: 'ì´ˆ', name: 'ê³µì‚°', fullName: '8ì›” ì–µìƒˆì´ˆ', image: 'images/08_cho.png' },
            { id: 8, month: 8, symbol: 'ğŸƒ', type: 'í”¼', name: 'ê³µì‚°', fullName: '8ì›” ì–µìƒˆí”¼', image: 'images/08_pi.png' },
            
            // 9ì›” êµ­ì§„
            { id: 9, month: 9, symbol: 'ğŸ¶', type: 'ê³ ', name: 'êµ­ì§„', fullName: '9ì›” ìˆ ì”', image: 'images/09_go1.png' },
            { id: 9, month: 9, symbol: 'ğŸµï¸', type: 'ê³ ', name: 'êµ­ì§„', fullName: '9ì›” êµ­í™”ê³ ', image: 'images/09_go2.png' },
            { id: 9, month: 9, symbol: 'ğŸŒ¼', type: 'ì´ˆ', name: 'êµ­ì§„', fullName: '9ì›” êµ­í™”ì´ˆ', image: 'images/09_cho.png' },
            { id: 9, month: 9, symbol: 'ğŸƒ', type: 'í”¼', name: 'êµ­ì§„', fullName: '9ì›” êµ­í™”í”¼', image: 'images/09_pi.png' },
            
            // 10ì›” ë‹¨í’
            { id: 10, month: 10, symbol: 'ğŸ¦Œ', type: 'ê³ ', name: 'ë‹¨í’', fullName: '10ì›” ì‚¬ìŠ´', image: 'images/10_go1.png' },
            { id: 10, month: 10, symbol: 'ğŸ', type: 'ê³ ', name: 'ë‹¨í’', fullName: '10ì›” ë‹¨í’ê³ ', image: 'images/10_go2.png' },
            { id: 10, month: 10, symbol: 'ğŸŒ°', type: 'ì´ˆ', name: 'ë‹¨í’', fullName: '10ì›” ë„í† ë¦¬', image: 'images/10_cho.png' },
            { id: 10, month: 10, symbol: 'ğŸƒ', type: 'í”¼', name: 'ë‹¨í’', fullName: '10ì›” ë‹¨í’í”¼', image: 'images/10_pi.png' },
            
            // 11ì›” ì˜¤ë™
            { id: 11, month: 11, symbol: 'ğŸŒŠ', type: 'ê´‘', name: 'ì˜¤ë™', fullName: '11ì›” ë¹„ê´‘', image: 'images/11_gwang.png' },
            { id: 11, month: 11, symbol: 'ğŸ•Šï¸', type: 'ê³ ', name: 'ì˜¤ë™', fullName: '11ì›” ì˜¤ë™ê³ ', image: 'images/11_go.png' },
            { id: 11, month: 11, symbol: 'ğŸ’§', type: 'ì´ˆ', name: 'ì˜¤ë™', fullName: '11ì›” ì˜¤ë™ì´ˆ', image: 'images/11_cho.png' },
            { id: 11, month: 11, symbol: 'ğŸƒ', type: 'í”¼', name: 'ì˜¤ë™', fullName: '11ì›” ì˜¤ë™í”¼', image: 'images/11_pi.png' },
            
            // 12ì›” ë¹„
            { id: 12, month: 12, symbol: 'ğŸ’§', type: 'ê´‘', name: 'ë¹„', fullName: '12ì›” ìš°ê´‘', image: 'images/12_gwang.png' },
            { id: 12, month: 12, symbol: 'ğŸŒŠ', type: 'ê³ ', name: 'ë¹„', fullName: '12ì›” ë¹„ê³ ', image: 'images/12_go.png' },
            { id: 12, month: 12, symbol: 'â˜”', type: 'ì´ˆ', name: 'ë¹„', fullName: '12ì›” ë¹„ì´ˆ', image: 'images/12_cho.png' },
            { id: 12, month: 12, symbol: 'ğŸƒ', type: 'í”¼', name: 'ë¹„', fullName: '12ì›” ë¹„í”¼', image: 'images/12_pi.png' },
            
            // ì¶”ê°€ ì„¸íŠ¸ 1: dory (4ì¥)
            { id: 13, month: 'dory', symbol: 'ğŸ ', type: 'ê´‘', name: 'dory', fullName: 'dory ê´‘', image: 'images/dory_gwang.png' },
            { id: 13, month: 'dory', symbol: 'ğŸŸ', type: 'ê³ ', name: 'dory', fullName: 'dory ê³ ', image: 'images/dory_go.png' },
            { id: 13, month: 'dory', symbol: 'ğŸŒŠ', type: 'ì´ˆ', name: 'dory', fullName: 'dory ì´ˆ', image: 'images/dory_cho.png' },
            { id: 13, month: 'dory', symbol: 'ğŸ’™', type: 'í”¼', name: 'dory', fullName: 'dory í”¼', image: 'images/dory_pi.png' },
            
            // ì¶”ê°€ ì„¸íŠ¸ 2: chu (4ì¥)
            { id: 14, month: 'chu', symbol: 'âš¡', type: 'ê´‘', name: 'chu', fullName: 'chu ê´‘', image: 'images/chu_gwang.png' },
            { id: 14, month: 'chu', symbol: 'ğŸ”¥', type: 'ê³ ', name: 'chu', fullName: 'chu ê³ ', image: 'images/chu_go.png' },
            { id: 14, month: 'chu', symbol: 'ğŸ’›', type: 'ì´ˆ', name: 'chu', fullName: 'chu ì´ˆ', image: 'images/chu_cho.png' },
            { id: 14, month: 'chu', symbol: 'â­', type: 'í”¼', name: 'chu', fullName: 'chu í”¼', image: 'images/chu_pi.png' },
            
            // ì¶”ê°€ ì„¸íŠ¸ 3: hgwang (4ì¥)
            { id: 15, month: 'hgwang', symbol: 'ğŸ‘‘', type: 'ê´‘', name: 'hgwang', fullName: 'hgwang ê´‘', image: 'images/hgwang_gwang.png' },
            { id: 15, month: 'hgwang', symbol: 'ğŸ’', type: 'ê³ ', name: 'hgwang', fullName: 'hgwang ê³ ', image: 'images/hgwang_go.png' },
            { id: 15, month: 'hgwang', symbol: 'ğŸ”®', type: 'ì´ˆ', name: 'hgwang', fullName: 'hgwang ì´ˆ', image: 'images/hgwang_cho.png' },
            { id: 15, month: 'hgwang', symbol: 'âœ¨', type: 'í”¼', name: 'hgwang', fullName: 'hgwang í”¼', image: 'images/hgwang_pi.png' },
            
            // ì¶”ê°€ ì„¸íŠ¸ 4: doya (2ì¥)
            { id: 16, month: 'doya', symbol: 'ğŸ¯', type: 'ê´‘', name: 'doya', fullName: 'doya ê´‘', image: 'images/doya_gwang.png' },
            { id: 16, month: 'doya', symbol: 'ğŸ²', type: 'ê³ ', name: 'doya', fullName: 'doya ê³ ', image: 'images/doya_go.png' }
        ];

        const HEART_PATTERN = [
            [0,0,1,1,0,0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0,1,1,1,1,0],
            [1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1],
            [0,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,1,1,1,1,1,1,1,1,0,0],
            [0,0,0,1,1,1,1,1,1,0,0,0],
            [0,0,0,0,0,1,1,0,0,0,0,0]
        ];

        let game = {
            board: [],
            selected: null,
            score: 0,
            startTime: null,
            timer: null,
            active: false,
            hints: 3,
            shuffles: 2,
            combo: 0,
            matched: 0
        };

        function createBoard() {
            const shuffled = [...cards].sort(() => Math.random() - 0.5);
            const positions = [];
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 12; col++) {
                    if (HEART_PATTERN[row][col] === 1) {
                        positions.push({ row, col });
                    }
                }
            }
            positions.sort(() => Math.random() - 0.5);

            const board = Array(8).fill().map(() => Array(12).fill(null));
            for (let i = 0; i < shuffled.length && i < positions.length; i++) {
                const pos = positions[i];
                board[pos.row][pos.col] = { ...shuffled[i], row: pos.row, col: pos.col, removed: false };
            }
            return board;
        }

        function renderBoard() {
            const boardEl = document.getElementById('gameBoard');
            boardEl.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 12; col++) {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'card';
                    cardEl.dataset.row = row;
                    cardEl.dataset.col = col;
                    
                    const card = game.board[row][col];
                    if (card && !card.removed) {
                        if (card.image) {
                            cardEl.style.backgroundImage = 'url("' + card.image + '")';
                            cardEl.classList.add('has-image');
                            cardEl.innerHTML = '<div style="display: none;"><div style="font-size: 1.4em;">' + card.symbol + '</div><div style="font-size: 0.7em; opacity: 0.8;">' + card.id + '</div></div>';
                        } else {
                            cardEl.innerHTML = '<div style="font-size: 1.4em;">' + card.symbol + '</div><div style="font-size: 0.7em; opacity: 0.8;">' + card.id + '</div>';
                        }
                        cardEl.onclick = () => selectCard(row, col);
                    } else {
                        cardEl.classList.add('empty');
                    }
                    
                    boardEl.appendChild(cardEl);
                }
            }
            updateDisplay();
        }

        function selectCard(row, col) {
            if (!game.active) return;
            const card = game.board[row][col];
            if (!card || card.removed) return;

            clearHighlights();

            if (game.selected === null) {
                game.selected = { row, col };
                document.querySelector('[data-row="' + row + '"][data-col="' + col + '"]').classList.add('selected');
                document.getElementById('status').textContent = card.fullName + ' ì„ íƒë¨. ê°™ì€ ì„¸íŠ¸ë¥¼ ì°¾ìœ¼ì„¸ìš”!';
            } else {
                const first = game.board[game.selected.row][game.selected.col];
                
                if (game.selected.row === row && game.selected.col === col) {
                    game.selected = null;
                    document.getElementById('status').textContent = 'ê°™ì€ ì›”ê³¼, ê°™ì€ ìºë¦­í„° ì„¸íŠ¸ë¥¼ í•œìŒì”© ì°¾ìœ¼ì„¸ìš”!';
                    return;
                }
                
                if (first.id === card.id && canConnect(game.selected.row, game.selected.col, row, col)) {
                    matchCards(game.selected.row, game.selected.col, row, col);
                    game.selected = null;
                } else {
                    game.selected = { row, col };
                    document.querySelector('[data-row="' + row + '"][data-col="' + col + '"]').classList.add('selected');
                    document.getElementById('status').textContent = first.id === card.id ? 'ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' : card.fullName + ' ì„ íƒë¨.';
                }
            }
        }

        function canConnect(r1, c1, r2, c2) {
            // ì§ì„  ì—°ê²° ì‹œë„ (0ë²ˆ êº¾ê¸°)
            if (canConnectStraight(r1, c1, r2, c2)) return true;
            
            // Lì ì—°ê²° ì‹œë„ (1ë²ˆ êº¾ê¸°) - ë‘ ê°€ì§€ ê²½ë¡œ ëª¨ë‘ í™•ì¸
            if (canConnectLShape(r1, c1, r2, c2)) return true;
            
            // Zì ì—°ê²° ì‹œë„ (2ë²ˆ êº¾ê¸°)
            if (canConnectZShape(r1, c1, r2, c2)) return true;
            
            return false;
        }

        function canConnectStraight(r1, c1, r2, c2) {
            if (r1 === r2) {
                // ê°™ì€ í–‰ - ìˆ˜í‰ì„ 
                const minCol = Math.min(c1, c2);
                const maxCol = Math.max(c1, c2);
                for (let col = minCol + 1; col < maxCol; col++) {
                    if (game.board[r1][col] && !game.board[r1][col].removed) {
                        return false;
                    }
                }
                return true;
            } else if (c1 === c2) {
                // ê°™ì€ ì—´ - ìˆ˜ì§ì„ 
                const minRow = Math.min(r1, r2);
                const maxRow = Math.max(r1, r2);
                for (let row = minRow + 1; row < maxRow; row++) {
                    if (game.board[row][c1] && !game.board[row][c1].removed) {
                        return false;
                    }
                }
                return true;
            }
            return false;
        }

        function canConnectLShape(r1, c1, r2, c2) {
            // Lì ì—°ê²°: ë‘ ê°€ì§€ ê²½ë¡œ í™•ì¸
            
            // ê²½ë¡œ 1: (r1, c1) â†’ (r1, c2) â†’ (r2, c2)
            // ì¤‘ê°„ì  (r1, c2)ê°€ ë¹„ì–´ìˆê±°ë‚˜ ëª©í‘œì  ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•¨
            if ((isEmpty(r1, c2) || (r1 === r2 && c2 === c2)) &&
                isPathClear(r1, c1, r1, c2) && 
                isPathClear(r1, c2, r2, c2)) {
                return true;
            }
            
            // ê²½ë¡œ 2: (r1, c1) â†’ (r2, c1) â†’ (r2, c2)
            // ì¤‘ê°„ì  (r2, c1)ì´ ë¹„ì–´ìˆê±°ë‚˜ ëª©í‘œì  ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•¨
            if ((isEmpty(r2, c1) || (r2 === r1 && c1 === c1)) &&
                isPathClear(r1, c1, r2, c1) && 
                isPathClear(r2, c1, r2, c2)) {
                return true;
            }
            
            return false;
        }

        function canConnectZShape(r1, c1, r2, c2) {
            // Zì ì—°ê²°: 3ê°œì˜ ì§ì„ ìœ¼ë¡œ ì—°ê²° (2ë²ˆ êº¾ê¸°)
            
            // ìˆ˜í‰-ìˆ˜ì§-ìˆ˜í‰ íŒ¨í„´ í™•ì¸
            for (let midRow = 0; midRow < 8; midRow++) {
                if (midRow !== r1 && midRow !== r2) {
                    // ê²½ë¡œ: (r1,c1) â†’ (r1,c2) â†’ (midRow,c2) â†’ (r2,c2)
                    if (isEmpty(r1, c2) && isEmpty(midRow, c2) &&
                        isPathClear(r1, c1, r1, c2) &&
                        isPathClear(r1, c2, midRow, c2) &&
                        isPathClear(midRow, c2, r2, c2)) {
                        return true;
                    }
                    
                    // ê²½ë¡œ: (r1,c1) â†’ (midRow,c1) â†’ (midRow,c2) â†’ (r2,c2)
                    if (isEmpty(midRow, c1) && isEmpty(midRow, c2) &&
                        isPathClear(r1, c1, midRow, c1) &&
                        isPathClear(midRow, c1, midRow, c2) &&
                        isPathClear(midRow, c2, r2, c2)) {
                        return true;
                    }
                }
            }
            
            // ìˆ˜ì§-ìˆ˜í‰-ìˆ˜ì§ íŒ¨í„´ í™•ì¸
            for (let midCol = 0; midCol < 12; midCol++) {
                if (midCol !== c1 && midCol !== c2) {
                    // ê²½ë¡œ: (r1,c1) â†’ (r2,c1) â†’ (r2,midCol) â†’ (r2,c2)
                    if (isEmpty(r2, c1) && isEmpty(r2, midCol) &&
                        isPathClear(r1, c1, r2, c1) &&
                        isPathClear(r2, c1, r2, midCol) &&
                        isPathClear(r2, midCol, r2, c2)) {
                        return true;
                    }
                    
                    // ê²½ë¡œ: (r1,c1) â†’ (r1,midCol) â†’ (r2,midCol) â†’ (r2,c2)
                    if (isEmpty(r1, midCol) && isEmpty(r2, midCol) &&
                        isPathClear(r1, c1, r1, midCol) &&
                        isPathClear(r1, midCol, r2, midCol) &&
                        isPathClear(r2, midCol, r2, c2)) {
                        return true;
                    }
                }
            }
            
            return false;
        }

        function isEmpty(row, col) {
            if (row < 0 || row >= 8 || col < 0 || col >= 12) return true;
            const card = game.board[row][col];
            return !card || card.removed;
        }

        function isPathClear(r1, c1, r2, c2) {
            if (r1 === r2) {
                const minCol = Math.min(c1, c2), maxCol = Math.max(c1, c2);
                for (let col = minCol + 1; col < maxCol; col++) {
                    if (!isEmpty(r1, col)) return false;
                }
                return true;
            }
            if (c1 === c2) {
                const minRow = Math.min(r1, r2), maxRow = Math.max(r1, r2);
                for (let row = minRow + 1; row < maxRow; row++) {
                    if (!isEmpty(row, c1)) return false;
                }
                return true;
            }
            return false;
        }

        function createExplosionEffect(cardElement) {
            const rect = cardElement.getBoundingClientRect();
            const gameBoard = document.getElementById('gameBoard');
            const boardRect = gameBoard.getBoundingClientRect();
            
            // ì¹´ë“œ ì¤‘ì‹¬ì  ê³„ì‚° (ê²Œì„ë³´ë“œ ê¸°ì¤€)
            const centerX = rect.left + rect.width / 2 - boardRect.left;
            const centerY = rect.top + rect.height / 2 - boardRect.top;
            
            // í­ë°œ ì»¨í…Œì´ë„ˆ ìƒì„±
            const explosion = document.createElement('div');
            explosion.className = 'explosion-effect';
            explosion.style.left = centerX + 'px';
            explosion.style.top = centerY + 'px';
            
            // ë³„ ì´í™íŠ¸ ì¶”ê°€
            for (let i = 0; i < 6; i++) {
                const star = document.createElement('div');
                star.className = 'explosion-star';
                star.textContent = 'âœ¨';
                const angle = (i * 60) * Math.PI / 180;
                const distance = 30;
                star.style.left = (Math.cos(angle) * distance - 10) + 'px';
                star.style.top = (Math.sin(angle) * distance - 10) + 'px';
                star.style.animationDelay = (i * 0.1) + 's';
                explosion.appendChild(star);
            }
            
            // íŒŒí‹°í´ ì´í™íŠ¸ ì¶”ê°€
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'explosion-particle';
                particle.style.backgroundColor = colors[i % colors.length];
                
                const angle = (i * 30) * Math.PI / 180;
                const distance = 40 + Math.random() * 20;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;
                
                particle.style.setProperty('--dx', dx + 'px');
                particle.style.setProperty('--dy', dy + 'px');
                particle.style.animationDelay = (Math.random() * 0.2) + 's';
                
                explosion.appendChild(particle);
            }
            
            gameBoard.appendChild(explosion);
            
            // 0.8ì´ˆ í›„ ì´í™íŠ¸ ì œê±°
            setTimeout(() => {
                if (explosion.parentNode) {
                    explosion.remove();
                }
            }, 800);
        }

        function playMatchSound() {
            // Web Audio APIë¥¼ ì‚¬ìš©í•œ "í‘!" ì†Œë¦¬ ìƒì„±
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // ë†’ì€ ì£¼íŒŒìˆ˜ì˜ ì§§ì€ ì†Œë¦¬ ìƒì„±
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // "í‘!" ì†Œë¦¬ë¥¼ ìœ„í•œ ì£¼íŒŒìˆ˜ ì„¤ì •
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.2);
                
                // ë³¼ë¥¨ ì„¤ì • (ë¹ ë¥´ê²Œ ê°ì†Œ)
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                // ì†Œë¦¬ ì¬ìƒ
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
                
            } catch (error) {
                // ì˜¤ë””ì˜¤ ì§€ì›ì´ ì•ˆ ë˜ëŠ” ê²½ìš° ë¬´ì‹œ
                console.log('Audio not supported');
            }
        }

        function matchCards(r1, c1, r2, c2) {
            game.board[r1][c1].removed = true;
            game.board[r2][c2].removed = true;
            game.matched++;
            game.combo++;
            
            let points = 100 + (game.combo - 1) * 50;
            points = Math.min(points, 500);
            game.score += points;
            
            const card1 = document.querySelector('[data-row="' + r1 + '"][data-col="' + c1 + '"]');
            const card2 = document.querySelector('[data-row="' + r2 + '"][data-col="' + c2 + '"]');
            
            // í­ë°œ ì´í™íŠ¸ì™€ ì†Œë¦¬ ì¶”ê°€
            createExplosionEffect(card1);
            createExplosionEffect(card2);
            playMatchSound();
            
            setTimeout(() => {
                card1.classList.add('empty');
                card2.classList.add('empty');
                card1.innerHTML = '';
                card2.innerHTML = '';
                card1.onclick = null;
                card2.onclick = null;
                card1.style.background = 'transparent';
                card1.style.border = 'none';
                card2.style.background = 'transparent';
                card2.style.border = 'none';
            }, 300);
            
            document.getElementById('status').textContent = 'ë§¤ì¹˜! +' + points + 'ì  (' + game.combo + 'ì—°ì†)';
            updateDisplay();
            
            if (game.matched >= 31) {
                endGame(true);
            }
        }

        function getHint() {
            if (game.hints <= 0 || !game.active) return;
            game.hints--;
            game.score = Math.max(0, game.score - 50);
            game.combo = 0;
            
            clearHighlights();
            
            const availableCards = [];
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 12; col++) {
                    const card = game.board[row][col];
                    if (card && !card.removed) {
                        availableCards.push({ id: card.id, row, col });
                    }
                }
            }
            
            for (let i = 0; i < availableCards.length; i++) {
                for (let j = i + 1; j < availableCards.length; j++) {
                    if (availableCards[i].id === availableCards[j].id && 
                        canConnect(availableCards[i].row, availableCards[i].col, availableCards[j].row, availableCards[j].col)) {
                        
                        document.querySelector('[data-row="' + availableCards[i].row + '"][data-col="' + availableCards[i].col + '"]').classList.add('hint');
                        document.querySelector('[data-row="' + availableCards[j].row + '"][data-col="' + availableCards[j].col + '"]').classList.add('hint');
                        
                        setTimeout(clearHighlights, 3000);
                        updateDisplay();
                        return;
                    }
                }
            }
            updateDisplay();
        }

        function shuffleCards() {
            if (game.shuffles <= 0 || !game.active) return;
            game.shuffles--;
            game.score = Math.max(0, game.score - 100);
            game.combo = 0;
            
            const remaining = [];
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 12; col++) {
                    const card = game.board[row][col];
                    if (card && !card.removed) {
                        remaining.push({ 
                            id: card.id, 
                            month: card.month, 
                            symbol: card.symbol, 
                            type: card.type, 
                            name: card.name, 
                            fullName: card.fullName, 
                            image: card.image 
                        });
                    }
                }
            }
            
            const positions = [];
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 12; col++) {
                    if (HEART_PATTERN[row][col] === 1) {
                        positions.push({ row, col });
                    }
                }
            }
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 12; col++) {
                    game.board[row][col] = null;
                }
            }
            
            positions.sort(() => Math.random() - 0.5);
            
                            for (let i = 0; i < remaining.length && i < positions.length; i++) {
                const pos = positions[i];
                game.board[pos.row][pos.col] = { 
                    id: remaining[i].id, 
                    month: remaining[i].month, 
                    symbol: remaining[i].symbol, 
                    type: remaining[i].type, 
                    name: remaining[i].name, 
                    fullName: remaining[i].fullName, 
                    image: remaining[i].image, 
                    row: pos.row, 
                    col: pos.col, 
                    removed: false 
                };
            }
            
            game.selected = null;
            renderBoard();
        }

        function clearHighlights() {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('selected', 'hint');
            });
        }

        function updateDisplay() {
            document.getElementById('score').textContent = game.score;
            document.getElementById('hintBtn').disabled = game.hints <= 0;
            document.getElementById('hintBtn').textContent = 'íŒíŠ¸ (' + game.hints + 'ë²ˆ)';
            document.getElementById('shuffleBtn').disabled = game.shuffles <= 0;
            document.getElementById('shuffleBtn').textContent = 'ì„ê¸° (' + game.shuffles + 'ë²ˆ)';
        }

        function startTimer() {
            game.startTime = Date.now();
            game.timer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - game.startTime) / 1000);
                const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
                const seconds = (elapsed % 60).toString().padStart(2, '0');
                document.getElementById('timer').textContent = minutes + ':' + seconds;
            }, 1000);
        }

        function startNewGame() {
            clearInterval(game.timer);
            game = {
                board: createBoard(),
                selected: null,
                score: 0,
                startTime: null,
                timer: null,
                active: true,
                hints: 3,
                shuffles: 2,
                combo: 0,
                matched: 0
            };
            
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('timer').textContent = '00:00';
            document.getElementById('status').textContent = 'ê°™ì€ ì›”ì˜ í™”íˆ¬íŒ¨ì™€ ìºë¦­í„°ë¥¼ í•œ ìŒì”© ì„ íƒí•˜ì„¸ìš”!';
            
            renderBoard();
            startTimer();
        }

        function endGame(won) {
            game.active = false;
            clearInterval(game.timer);
            
            document.getElementById('finalTime').textContent = document.getElementById('timer').textContent;
            document.getElementById('finalScore').textContent = game.score;
            document.getElementById('gameOver').style.display = 'block';
        }

        function toggleRules() {
            const rules = document.getElementById('rules');
            const overlay = document.getElementById('rulesOverlay');
            
            if (rules.style.display === 'none') {
                rules.style.display = 'block';
                overlay.style.display = 'block';
            } else {
                rules.style.display = 'none';
                overlay.style.display = 'none';
            }
        }

        // ê²Œì„ ì‹œì‘
        startNewGame();
        
        // íƒ€ì´í‹€ ì´ë¯¸ì§€ ì„¤ì •
        const titleElement = document.getElementById('gameTitle');
        titleElement.style.backgroundImage = 'url("images/title.png")';
        titleElement.style.backgroundSize = 'cover';
        titleElement.style.backgroundPosition = 'center';
        titleElement.style.backgroundRepeat = 'no-repeat';
        titleElement.textContent = ''; // í…ìŠ¤íŠ¸ ì œê±°
    </script>
</body>
</html>